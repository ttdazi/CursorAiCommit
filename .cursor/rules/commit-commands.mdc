---
description: åŠ¨æ€ç”Ÿæˆä¸­è‹±æ–‡ Git Commit ä¿¡æ¯å‘½ä»¤ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
globs: 
alwaysApply: true
---

# åŠ¨æ€ Commit è¯­è¨€åˆ‡æ¢è§„åˆ™

å½“ç”¨æˆ·åœ¨å¯¹è¯æ¡†ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤æ—¶ï¼Œè¯·ä¸¥æ ¼æŒ‰ç…§æœ¬è§„åˆ™æ‰§è¡Œï¼š

## è§¦å‘æŒ‡ä»¤
- `commit ä¸­æ–‡`ï¼šç”Ÿæˆä¸­æ–‡ commit ä¿¡æ¯
- `commit è‹±æ–‡`ï¼šç”Ÿæˆè‹±æ–‡ commit ä¿¡æ¯

**é‡è¦**ï¼šæ”¶åˆ°è¿™äº›æŒ‡ä»¤åï¼Œä½¿ç”¨è½»é‡çº§å‘½ä»¤è·å–å˜æ›´ä¿¡æ¯ï¼Œé¿å…æ‰§è¡Œå¯èƒ½å¡ä½çš„ `git diff` å‘½ä»¤ã€‚

## æ‰§è¡Œæ­¥éª¤

1.  **åˆ†æå˜æ›´**ï¼ˆä¼˜å…ˆä½¿ç”¨è½»é‡çº§å‘½ä»¤ï¼Œé¿å…å¡ä½ï¼‰ï¼š
    - **ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æš‚å­˜åŒº**
      - æ‰§è¡Œ `git status --short` è·å–æš‚å­˜æ–‡ä»¶åˆ—è¡¨å’ŒçŠ¶æ€ã€‚
      - å¦‚æœæœ‰æš‚å­˜æ–‡ä»¶ï¼ˆç¬¬ä¸€åˆ—æœ‰ A/M/D/R ç­‰æ ‡è®°ï¼‰ï¼Œç›´æ¥è¿›å…¥ç”Ÿæˆ commit ä¿¡æ¯æ­¥éª¤ã€‚
    
    - **ç¬¬äºŒæ­¥ï¼šè‡ªåŠ¨æš‚å­˜æœªè·Ÿè¸ª/æœªæš‚å­˜çš„å˜æ›´**ï¼ˆå¦‚æœæ²¡æœ‰æš‚å­˜æ–‡ä»¶ï¼‰
      - æ‰§è¡Œ `git status --short` æ£€æŸ¥æœªæš‚å­˜çš„å˜æ›´ï¼ˆç¬¬äºŒåˆ—æœ‰ M/D æ ‡è®°ï¼‰å’Œæœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼ˆ?? æ ‡è®°ï¼‰ã€‚
      - å¦‚æœå‘ç°æœªæš‚å­˜æˆ–æœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼Œ**è‡ªåŠ¨æ‰§è¡Œ `git add`**ï¼š
        - **é‡è¦**ï¼šä½¿ç”¨**ç›´æ¥æ–‡ä»¶è·¯å¾„**è€Œä¸æ˜¯ç›®å½•è·¯å¾„ï¼Œé¿å…å¡ä½
        - ä½¿ç”¨ `git ls-files --others --exclude-standard` è·å–æœªè·Ÿè¸ªæ–‡ä»¶åˆ—è¡¨
        - å¯¹äºæ¯ä¸ªæ–‡ä»¶ï¼Œæ‰§è¡Œ `git add "<æ–‡ä»¶è·¯å¾„>"`ï¼ˆå¸¦å¼•å·ï¼Œé¿å…è·¯å¾„ä¸­çš„ç©ºæ ¼é—®é¢˜ï¼‰
        - **é¿å…ä½¿ç”¨**ï¼šä¸è¦æ‰§è¡Œ `git add <ç›®å½•>/` æˆ– `git add .`ï¼Œè¿™äº›å‘½ä»¤å¯èƒ½å› ä¸º Windows è¡Œå°¾è½¬æ¢æˆ–å¤§é‡æ–‡ä»¶è€Œå¡ä½
      - æš‚å­˜å®Œæˆåï¼Œé‡æ–°æ‰§è¡Œ `git status --short` ç¡®è®¤æ–‡ä»¶å·²æš‚å­˜ã€‚
    
    - **ç¬¬ä¸‰æ­¥ï¼šè·å–å˜æ›´è¯¦æƒ…**ï¼ˆå¦‚æœéœ€è¦æ›´å¤šä¿¡æ¯ï¼‰
      - æ‰§è¡Œ `git diff --cached --name-status` è·å–æ–‡ä»¶çŠ¶æ€ï¼ˆA=æ–°å¢ï¼ŒM=ä¿®æ”¹ï¼ŒD=åˆ é™¤ï¼‰
      - **æ³¨æ„**ï¼šå¦‚æœè¿™äº›å‘½ä»¤æ‰§è¡Œè¶…è¿‡ 3 ç§’æ— å“åº”ï¼Œç«‹å³æ”¾å¼ƒï¼ŒåŸºäºæ–‡ä»¶åå’Œè·¯å¾„æ¨æ–­å˜æ›´ç±»å‹ã€‚
    
    - **é¿å…ä½¿ç”¨**ï¼š
      - ä¸è¦æ‰§è¡Œ `git diff --cached`ï¼ˆå®Œæ•´ diffï¼‰ï¼Œå› ä¸ºå®ƒå¯èƒ½å¡ä½ï¼Œç‰¹åˆ«æ˜¯å½“æœ‰å¤§é‡å˜æ›´æˆ–å¤§æ–‡ä»¶æ—¶ã€‚
      - ä¸è¦ä½¿ç”¨ç›®å½•è·¯å¾„æ‰§è¡Œ `git add`ï¼Œåº”ç›´æ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„ã€‚
    
    - åŸºäºè·å–çš„ä¿¡æ¯è¿›è¡Œåˆ†æå’Œç”Ÿæˆ commit ä¿¡æ¯ã€‚

2.  **ç”Ÿæˆä¿¡æ¯**ï¼š
    - æ ¹æ®ç”¨æˆ·çš„è¯­è¨€æŒ‡ä»¤ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰ï¼ŒåŸºäºå˜æ›´å†…å®¹ç”Ÿæˆç¬¦åˆ Conventional Commits è§„èŒƒçš„ commit messageã€‚
    - **æ ¼å¼**ï¼š`<type>(<scope>): <subject>`
    - **ç±»å‹ (Type)**ï¼š
        - `feat`: æ–°åŠŸèƒ½
        - `fix`: ä¿®å¤ bug
        - `docs`: æ–‡æ¡£å˜æ›´
        - `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰ï¼‰
        - `refactor`: ä»£ç é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰
        - `perf`: æ€§èƒ½ä¼˜åŒ–
        - `test`: å¢åŠ æµ‹è¯•
        - `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
    - **è¯­è¨€è¦æ±‚**ï¼š
        - `commit ä¸­æ–‡` -> `subject` ä½¿ç”¨ **ç®€ä½“ä¸­æ–‡**ã€‚
        - `commit è‹±æ–‡` -> `subject` ä½¿ç”¨ **è‹±æ–‡**ã€‚

3.  **è¾“å‡ºç»“æœå¹¶è¯¢é—®ç¡®è®¤**ï¼ˆä½¿ç”¨ç»“æ„åŒ–æ ¼å¼ï¼‰ï¼š

    è¾“å‡ºæ ¼å¼å¦‚ä¸‹ï¼š

    ---
    
    **ğŸ“‹ æš‚å­˜åŒºå˜æ›´ä¿¡æ¯ï¼š**
    
    å˜æ›´æ–‡ä»¶ï¼š
    - <æ–‡ä»¶1> (çŠ¶æ€)
    - <æ–‡ä»¶2> (çŠ¶æ€)
    
    å˜æ›´æ‘˜è¦ï¼šæ–°å¢ X ä¸ª | ä¿®æ”¹ Y ä¸ª | åˆ é™¤ Z ä¸ª
    
    ---
    
    **ğŸ“ ç”Ÿæˆçš„ Commit Messageï¼š**
    
    ```
    <type>(<scope>): <subject>
    ```
    
    ---
    
    **ğŸ’» æäº¤å‘½ä»¤ï¼ˆè·¨å¹³å°ï¼‰ï¼š**
    
    **Windows PowerShellï¼ˆé¿å…ä¹±ç ï¼‰:**
    ```powershell
    $msg = "<å®Œæ•´çš„ commit message>"; $bytes = [System.Text.Encoding]::UTF8.GetBytes($msg); [System.IO.File]::WriteAllBytes("$env:TEMP\commit-msg.txt", $bytes); git commit -F "$env:TEMP\commit-msg.txt"
    ```
    
    **Mac/Linux/Git Bash:**
    ```bash
    git commit -m "<å®Œæ•´çš„ commit message>"
    ```
    
    ---
    
    **â“ ç¡®è®¤æäº¤ï¼š**
    
    æ˜¯å¦éœ€è¦æ‰§è¡Œæ­¤ commitï¼Ÿå›å¤'å¥½çš„'ã€'å¯ä»¥'ã€'yes'ç­‰å³å¯æ‰§è¡Œã€‚
    
    ---

4.  **æ‰§è¡Œç¡®è®¤**ï¼š
    - å¦‚æœç”¨æˆ·å›å¤ä»¥ä¸‹ä»»ä¸€ç¡®è®¤è¯ï¼Œåˆ™**ç«‹å³æ‰§è¡Œ** `git commit` å‘½ä»¤ï¼š
      - ä¸­æ–‡ç¡®è®¤è¯ï¼šå¥½çš„ã€å¯ä»¥ã€å¯ä»¥çš„ã€è¡Œã€æ²¡é—®é¢˜ã€æ‰§è¡Œã€æäº¤ã€ç¡®è®¤
      - è‹±æ–‡ç¡®è®¤è¯ï¼šyesã€yã€okã€okayã€sureã€goã€executeã€commit
    - å¦‚æœç”¨æˆ·å›å¤å¦å®šè¯ï¼ˆä¸ã€noã€å–æ¶ˆç­‰ï¼‰ï¼Œåˆ™ä¸æ‰§è¡Œï¼Œå¹¶è¯¢é—®æ˜¯å¦éœ€è¦ä¿®æ”¹ã€‚
    
    **æ‰§è¡Œæ—¶æ³¨æ„ï¼ˆè·¨å¹³å°ç¼–ç å¤„ç†ï¼‰**ï¼š
    - **Windows PowerShell**: ä½¿ç”¨ UTF-8 æ—  BOM æ–‡ä»¶æ–¹å¼æäº¤ï¼Œé¿å…ä¸­æ–‡ä¹±ç 
      ```powershell
      $msg = "<commit message>"; $bytes = [System.Text.Encoding]::UTF8.GetBytes($msg); [System.IO.File]::WriteAllBytes("$env:TEMP\commit-msg.txt", $bytes); git commit -F "$env:TEMP\commit-msg.txt"
      ```
    - **Mac/Linux/Git Bash**: ç›´æ¥ä½¿ç”¨ `git commit -m`
      ```bash
      git commit -m "<commit message>"
      ```
    
    æ‰§è¡Œåï¼Œæ˜¾ç¤ºæäº¤ç»“æœã€‚

5.  **æäº¤åéªŒè¯ï¼ˆå¯é€‰ï¼‰**ï¼š
    - æäº¤å®Œæˆåï¼Œå¯æ‰§è¡Œ `git log -1 --oneline` éªŒè¯ commit message æ˜¯å¦æ­£ç¡®æ˜¾ç¤º
    - å¦‚æœå‘ç°ä¹±ç ï¼Œæç¤ºç”¨æˆ·æ£€æŸ¥ç»ˆç«¯ç¼–ç è®¾ç½®

## ç¤ºä¾‹äº¤äº’

**ç”¨æˆ·**: `commit ä¸­æ–‡`

**AI**:

---

**ğŸ“‹ æš‚å­˜åŒºå˜æ›´ä¿¡æ¯ï¼š**

å˜æ›´æ–‡ä»¶ï¼š
- src/pages/Login.vue (ä¿®æ”¹)
- src/utils/auth.ts (ä¿®æ”¹)

å˜æ›´æ‘˜è¦ï¼šæ–°å¢ 0 ä¸ª | ä¿®æ”¹ 2 ä¸ª | åˆ é™¤ 0 ä¸ª

---

**ğŸ“ ç”Ÿæˆçš„ Commit Messageï¼š**

```
fix(auth): ä¿®å¤ç™»å½•é¡µé¢æ— æ³•è·³è½¬çš„é—®é¢˜
```

---

**ğŸ’» æäº¤å‘½ä»¤ï¼ˆè·¨å¹³å°ï¼‰ï¼š**

**Windows PowerShellï¼ˆé¿å…ä¹±ç ï¼‰:**
```powershell
$msg = "fix(auth): ä¿®å¤ç™»å½•é¡µé¢æ— æ³•è·³è½¬çš„é—®é¢˜"; $bytes = [System.Text.Encoding]::UTF8.GetBytes($msg); [System.IO.File]::WriteAllBytes("$env:TEMP\commit-msg.txt", $bytes); git commit -F "$env:TEMP\commit-msg.txt"
```

**Mac/Linux/Git Bash:**
```bash
git commit -m "fix(auth): ä¿®å¤ç™»å½•é¡µé¢æ— æ³•è·³è½¬çš„é—®é¢˜"
```

---

**â“ ç¡®è®¤æäº¤ï¼š**

æ˜¯å¦éœ€è¦æ‰§è¡Œæ­¤ commitï¼Ÿå›å¤'å¥½çš„'ã€'å¯ä»¥'ã€'yes'ç­‰å³å¯æ‰§è¡Œã€‚

---

**ç”¨æˆ·**: `å¥½çš„`

**AI**:
æ­£åœ¨æ‰§è¡Œ commitï¼ˆä½¿ç”¨ UTF-8 ç¼–ç ï¼‰...

âœ“ Commit å·²æˆåŠŸæ‰§è¡Œï¼

éªŒè¯ç»“æœï¼š
```
abc1234 fix(auth): ä¿®å¤ç™»å½•é¡µé¢æ— æ³•è·³è½¬çš„é—®é¢˜
```

---

**ç”¨æˆ·**: `commit è‹±æ–‡`

**AI**:

---

**ğŸ“‹ Staged Changes:**

Files:
- src/pages/Login.vue (modified)
- src/utils/auth.ts (modified)

Summary: 0 added | 2 modified | 0 deleted

---

**ğŸ“ Generated Commit Message:**

```
fix(auth): resolve login page redirect issue
```

---

**ğŸ’» Commit Commands (Cross-platform):**

**Windows PowerShell:**
```powershell
$msg = "fix(auth): resolve login page redirect issue"; $bytes = [System.Text.Encoding]::UTF8.GetBytes($msg); [System.IO.File]::WriteAllBytes("$env:TEMP\commit-msg.txt", $bytes); git commit -F "$env:TEMP\commit-msg.txt"
```

**Mac/Linux/Git Bash:**
```bash
git commit -m "fix(auth): resolve login page redirect issue"
```

---

**â“ Confirm Commit:**

Would you like to execute this commit? Reply 'yes', 'ok', 'å¥½çš„' etc. to proceed.

---

**ç”¨æˆ·**: `yes`

**AI**:
Executing commit (UTF-8 encoding)...

âœ“ Commit executed successfully!

Verification:
```
abc1234 fix(auth): resolve login page redirect issue
```
